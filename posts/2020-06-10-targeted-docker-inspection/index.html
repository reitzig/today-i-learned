<!doctype html><html lang=en><meta charset=utf-8><meta name=generator content="Hugo 0.111.3"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Targeted Docker Inspection&nbsp;&ndash;&nbsp;Today I Learned</title><link rel=stylesheet href=/today-i-learned/css/core.min.399dab7fa1f40244041d4229846dfd5482112986bf439798a00f891ea52d6110509f13568b777a307148a4da24754429.css integrity=sha384-OZ2rf6H0AkQEHUIphG39VIIRKYa/Q5eYoA+JHqUtYRBQnxNWi3d6MHFIpNokdUQp><meta name=twitter:card content="summary"><meta name=twitter:title content="Targeted Docker Inspection"><base href=https://reitzig.github.io/today-i-learned/><link rel=icon href="data:;base64,="><meta name=author content="Raphael Reitzig"><meta name=description content="
How do you get basic information about Docker containers in a script?
Neither docker ps nor docker inspect feel really neat — one is a pain to parse,
the other is very verbose.
"><meta name=keywords content="Tool,Docker"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><span class="site name">Today I Learned</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/tags/>Tags</a><a class="nav item" href=impressum>About</a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Targeted Docker Inspection</h1><p class="article date">2020-06-10</p><p class="article github_edit"><a rel=nofollow href=https://github.com/reitzig/today-i-learned/edit/master/content/posts/2020-06-10-targeted-docker-inspection.adoc></a></p><p class="article tweet_link"><a href=https://twitter.com/OmegaPolice/status/1271171835904905216><span class="iconfont icon-twitter"></span></a></p></section><article class="article markdown-body"><div class=paragraph><p>How do you get basic information about Docker containers in a script?
Neither <code>docker ps</code> nor <code>docker inspect</code> feel really neat — one is a pain to parse,
the other is very verbose.</p></div><div class=paragraph><p>If you are happy adding a dependency to your script,
the ever more popular
<a href=https://stedolan.github.io/jq/><code>jq</code></a>
can do the job for you:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>  docker inspect --format=&#34;{{.State.Running}}&#34; my-container \
| jq .[0].State.Running</code></pre></div></div><div class=paragraph><p>While <code>jq</code> is a useful helper to pick up,
this still feels a little off.
Shouldn't Docker have something for us?</p></div><div class=paragraph><p>It does, indeed!
Despite the misleading name,
<a href=https://docs.docker.com/engine/reference/commandline/inspect/><code>--format</code></a>
does the trick.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>docker inspect --format=&#34;{{.State.Running}}&#34; my-container</code></pre></div></div><div class=paragraph><p>It is easy to see how you can cobble together whatever information you need from here,
in whichever arrangement.
If pain text gets too messy, you can also go back to JSON easily,
for instance like <code>{{json .Config.Env}}</code>.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><img src=assets/icons/tip.svg alt=Tip></td><td class=content><div class=paragraph><p>In combination with <code>watch</code>,
you can use <code>--format</code> with the different <code>docker</code> commands
to create your favorite live Docker dashboard with only a few terminals!</p></div><div class=paragraph><p>When I work with containers,
I usually have something like this somewhere to the side,
just to keep track of what has been accumulating:</p></div><div class=imageblock><div class=content><img src=img/2020-06-10-custom-docker-dashboard.png alt="Live container and image lists in terminals"></div></div><div class=paragraph><p>Big screens and tiling window managers are very handy for things like this.</p></div></td></tr></tbody></table></div></article><section class="article labels"><a class=tag href=/tags/tool/>Tool</a><a class=tag href=/tags/docker/>Docker</a></section><section class="article tweet">Comment & Share on 
    <a href=https://twitter.com/OmegaPolice/status/1271171835904905216>Twitter&nbsp;<span class="iconfont icon-twitter"></span></a></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=/today-i-learned/posts/2020-06-11-sane-yaml-with-json-schema/><span class="iconfont icon-article"></span>Sane YAML With JSON Schema</a></p><p><a class=link href=/today-i-learned/posts/2020-05-29-using-build-tools-from-containers/><span class="iconfont icon-article"></span>Using Build Tools From Containers</a></p></section></div></section><section id=footer><div class=footer-wrap><p class=copyright>© 2020 &ndash; 2022 Raphael Reitzig<br>This work is licensed under a
<a rel=license href=http://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0 International License
</a>.<br><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt='Creative Commons License' style=border-width:0 src=cc-by-80x15.png></a></p><p class=powerby><span>Powered&nbsp;by&nbsp;</span><a href=https://gohugo.io target=_blank>Hugo</a><span>&nbsp;&&nbsp;</span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section><script src=/today-i-learned/js/hljs.min.6f979583f61e4ec5f0b94f94eab2e130ee628032474d374414dba4e33cc12097a0d01fe65b33378b23f6d3b053b95445.js integrity=sha384-b5eVg/YeTsXwuU+U6rLhMO5igDJHTTdEFNuk4zzBIJeg0B/mWzM3iyP207BTuVRF></script><script>hljs.initHighlightingOnLoad()</script></body></html>